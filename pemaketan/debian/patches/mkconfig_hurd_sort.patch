Description: Sort gnumach kernels in version order
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Origin: upstream, http://bazaar.launchpad.net/~vcs-imports/grub/grub2-bzr/revision/5232
Forwarded: not-needed
Applied-Upstream: http://bazaar.launchpad.net/~vcs-imports/grub/grub2-bzr/revision/5232
Last-Update: 2013-10-07

Index: b/util/grub.d/10_hurd.in
===================================================================
--- a/util/grub.d/10_hurd.in
+++ b/util/grub.d/10_hurd.in
@@ -153,8 +153,8 @@
 submenu_indentation=""
 is_first_entry=true
 
-for kernel in ${kernels}
-do
+while [ "x$kernels" != "x" ] ; do
+  kernel=`version_find_latest $kernels`
 
   if [ "x$is_first_entry" = xtrue ]; then
       hurd_entry "$kernel" simple
@@ -166,6 +166,8 @@
 
   hurd_entry "$kernel" advanced
   hurd_entry "$kernel" recovery
+
+  kernels=`echo $kernels | tr ' ' '\n' | grep -vx $kernel | tr '\n' ' '`
   is_first_entry=false
 done
 
